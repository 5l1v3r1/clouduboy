#include <SPI.h>
#include "Arduboy.h"

Arduboy arduboy;



PROGMEM const unsigned char gfx_blobs_sonic[] = { /*16x16x4*/
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0xe0, 0xc0, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x07, 0x07, 0x00, 0x00, 0x00, 0x00,

  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x38,
  0x00, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00,
  0x18, 0x3b, 0x38, 0x30, 0x30, 0x18, 0x00, 0x00,

  0x00, 0x80, 0x80, 0xc0, 0xe2, 0xc6, 0xf2, 0xc4,
  0xfa, 0x24, 0x1c, 0x3c, 0x78, 0xe6, 0x00, 0x00,
  0x00, 0x00, 0x30, 0x08, 0x00, 0x00, 0x03, 0x1f,
  0x27, 0x04, 0x40, 0x48, 0x08, 0x25, 0x10, 0x00,

  0x80, 0x40, 0x62, 0x32, 0x1d, 0x39, 0x0d, 0x03,
  0x05, 0x1a, 0x02, 0x02, 0x06, 0x19, 0x60, 0x00,
  0x41, 0x71, 0x4b, 0x77, 0x7f, 0x7f, 0xfc, 0xe0,
  0xc0, 0xc0, 0x00, 0x00, 0x00, 0x00, 0x00, 0x00
};

const byte GFX_BLOBS_SONIC_WIDTH = 16;
const byte GFX_BLOBS_SONIC_HEIGHT = 16;
const byte GFX_BLOBS_SONIC_FRAMES = 4;
const byte GFX_BLOBS_SONIC_FRAMESIZE = 32;



void setup() {
  arduboy.begin();
}

void loop() {
  arduboy.clear();
  int i = 0;

  while(1) {

    arduboy.drawBitmap( 16, 16, gfx_blobs_sonic + GFX_BLOBS_SONIC_FRAMESIZE*i, GFX_BLOBS_SONIC_WIDTH, GFX_BLOBS_SONIC_HEIGHT, WHITE );
	  arduboy.display();

    if (++i >= GFX_BLOBS_SONIC_FRAMES) {
      i = 0;
      //arduboy.clear();
      delay(5);
      arduboy.fillRect( 16,16, 16,16, BLACK);
    } else if (i>0) {
      delay(7);
    }
  }
}
